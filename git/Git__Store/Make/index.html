<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Make (git.Git__Store.Make)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">git</a> &#x00BB; <a href="../index.html">Git__Store</a> &#x00BB; Make</nav><h1>Module <code>Git__Store.Make</code></h1></header><h3 class="heading">Parameters</h3><ul><li><code>H : Digestif.S</code></li><li><code><a href="argument-2-FS/index.html">FS</a> : <a href="../../Git__/S/index.html#module-type-FS">Git__.S.FS</a></code></li><li><code><a href="argument-3-Inflate/index.html">Inflate</a> : <a href="../../Git__/S/index.html#module-type-INFLATE">Git__.S.INFLATE</a></code></li><li><code><a href="argument-4-Deflate/index.html">Deflate</a> : <a href="../../Git__/S/index.html#module-type-DEFLATE">Git__.S.DEFLATE</a></code></li></ul><h3 class="heading">Signature</h3><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../index.html#module-type-S">S</a> <span class="keyword">with</span> <span class="keyword">module</span> <a href="../module-type-S/Hash/index.html">Hash</a> = <a href="../../Git/Hash/index.html#module-Make">Git.Hash.Make(H)</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../module-type-S/Inflate/index.html">Inflate</a> = <a href="index.html#argument-3-Inflate">Inflate</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../module-type-S/Deflate/index.html">Deflate</a> = <a href="index.html#argument-4-Deflate">Deflate</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../module-type-S/FS/index.html">FS</a> = <a href="index.html#argument-2-FS">FS</a></code></span></summary><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>The type of the git repository.</p></dd></dl><dl><dt class="spec module" id="module-FS"><a href="#module-FS" class="anchor"></a><code><span class="keyword">module</span> FS = <a href="index.html#argument-2-FS">FS</a></code></dt><dd><p>The <code>FS</code> module used to make the implementation.</p></dd></dl><dl><dt class="spec module" id="module-Hash"><a href="#module-Hash" class="anchor"></a><code><span class="keyword">module</span> Hash = <a href="../../Git/Hash/index.html#module-Make">Git.Hash.Make(H)</a></code></dt><dd><p>The <code>Digest</code> module used to make the implementation.</p></dd></dl><dl><dt class="spec module" id="module-Inflate"><a href="#module-Inflate" class="anchor"></a><code><span class="keyword">module</span> Inflate = <a href="index.html#argument-3-Inflate">Inflate</a></code></dt><dd><p>The <code>Inflate</code> module used to make the implementation.</p></dd></dl><dl><dt class="spec module" id="module-Deflate"><a href="#module-Deflate" class="anchor"></a><code><span class="keyword">module</span> Deflate = <a href="index.html#argument-4-Deflate">Deflate</a></code></dt><dd><p>The <code>Deflate</code> module used to make the implementation.</p></dd></dl><dl><dt class="spec module" id="module-Value"><a href="#module-Value" class="anchor"></a><code><span class="keyword">module</span> <a href="Value/index.html">Value</a> : <a href="../../Git/Value/index.html#module-type-S">Git.Value.S</a> <span class="keyword">with</span> <span class="keyword">module</span> <a href="../../Git/Value/module-type-S/Hash/index.html">Hash</a> := <a href="index.html#module-Hash">Hash</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../../Git/Value/module-type-S/Inflate/index.html">Inflate</a> := <a href="index.html#module-Inflate">Inflate</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../../Git/Value/module-type-S/Deflate/index.html">Deflate</a> := <a href="index.html#module-Deflate">Deflate</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../../Git/Value/module-type-S/Blob/index.html">Blob</a> = <a href="../../Git/Blob/index.html#module-Make">Git.Blob.Make(Hash)</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../../Git/Value/module-type-S/Commit/index.html">Commit</a> = <a href="../../Git/Commit/index.html#module-Make">Git.Commit.Make(Hash)</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../../Git/Value/module-type-S/Tree/index.html">Tree</a> = <a href="../../Git/Tree/index.html#module-Make">Git.Tree.Make(Hash)</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../../Git/Value/module-type-S/Tag/index.html">Tag</a> = <a href="../../Git/Tag/index.html#module-Make">Git.Tag.Make(Hash)</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="../../Git/Value/module-type-S/index.html#type-t">t</a> = <a href="../../Git/Value/Make/index.html#type-t">Git.Value.Make(Hash)(Inflate)(Deflate).t</a></code></dt><dd><p>The Value module, which represents the Git object.</p></dd></dl><dl><dt class="spec module" id="module-Reference"><a href="#module-Reference" class="anchor"></a><code><span class="keyword">module</span> <a href="Reference/index.html">Reference</a> : <a href="../../Git/Reference/index.html#module-type-IO">Git.Reference.IO</a> <span class="keyword">with</span> <span class="keyword">module</span> <a href="../../Git/Reference/module-type-IO/Hash/index.html">Hash</a> := <a href="index.html#module-Hash">Hash</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../../Git/Reference/module-type-IO/FS/index.html">FS</a> := <a href="index.html#module-FS">FS</a></code></dt><dd><p>The Reference module, which represents the Git reference.</p></dd></dl><div class="spec module" id="module-HDec"><a href="#module-HDec" class="anchor"></a><code><span class="keyword">module</span> <a href="HDec/index.html">HDec</a> : <a href="../../Git/Unpack/index.html#module-type-H">Git.Unpack.H</a> <span class="keyword">with</span> <span class="keyword">module</span> <a href="../../Git/Unpack/module-type-H/Hash/index.html">Hash</a> := <a href="index.html#module-Hash">Hash</a></code></div><div class="spec module" id="module-PDec"><a href="#module-PDec" class="anchor"></a><code><span class="keyword">module</span> <a href="PDec/index.html">PDec</a> : <a href="../../Git/Unpack/index.html#module-type-P">Git.Unpack.P</a> <span class="keyword">with</span> <span class="keyword">module</span> <a href="../../Git/Unpack/module-type-P/Hash/index.html">Hash</a> := <a href="index.html#module-Hash">Hash</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../../Git/Unpack/module-type-P/Inflate/index.html">Inflate</a> := <a href="index.html#module-Inflate">Inflate</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../../Git/Unpack/module-type-P/Hunk/index.html">Hunk</a> := <a href="index.html#module-HDec">HDec</a></code></div><div class="spec module" id="module-RPDec"><a href="#module-RPDec" class="anchor"></a><code><span class="keyword">module</span> <a href="RPDec/index.html">RPDec</a> : <a href="../../Git/Unpack/index.html#module-type-D">Git.Unpack.D</a> <span class="keyword">with</span> <span class="keyword">module</span> <a href="../../Git/Unpack/module-type-D/Hash/index.html">Hash</a> := <a href="index.html#module-Hash">Hash</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../../Git/Unpack/module-type-D/Inflate/index.html">Inflate</a> := <a href="index.html#module-Inflate">Inflate</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../../Git/Unpack/module-type-D/Hunk/index.html">Hunk</a> := <a href="index.html#module-HDec">HDec</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../../Git/Unpack/module-type-D/Pack/index.html">Pack</a> := <a href="index.html#module-PDec">PDec</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../../Git/Unpack/module-type-D/Mapper/index.html">Mapper</a> := <a href="FS/index.html#module-Mapper">FS.Mapper</a></code></div><div class="spec module" id="module-PEnc"><a href="#module-PEnc" class="anchor"></a><code><span class="keyword">module</span> <a href="PEnc/index.html">PEnc</a> : <a href="../../Git/Pack/index.html#module-type-P">Git.Pack.P</a> <span class="keyword">with</span> <span class="keyword">module</span> <a href="../../Git/Pack/module-type-P/Hash/index.html">Hash</a> := <a href="index.html#module-Hash">Hash</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../../Git/Pack/module-type-P/Deflate/index.html">Deflate</a> := <a href="index.html#module-Deflate">Deflate</a></code></div><div class="spec module" id="module-IDec"><a href="#module-IDec" class="anchor"></a><code><span class="keyword">module</span> <a href="IDec/index.html">IDec</a> : <a href="../../Git/Index_pack/index.html#module-type-LAZY">Git.Index_pack.LAZY</a> <span class="keyword">with</span> <span class="keyword">module</span> <a href="../../Git/Index_pack/module-type-LAZY/Hash/index.html">Hash</a> := <a href="index.html#module-Hash">Hash</a></code></div><div class="spec module" id="module-IEnc"><a href="#module-IEnc" class="anchor"></a><code><span class="keyword">module</span> <a href="IEnc/index.html">IEnc</a> : <a href="../../Git/Index_pack/index.html#module-type-ENCODER">Git.Index_pack.ENCODER</a> <span class="keyword">with</span> <span class="keyword">module</span> <a href="../../Git/Index_pack/module-type-ENCODER/Hash/index.html">Hash</a> := <a href="index.html#module-Hash">Hash</a></code></div><div class="spec module" id="module-PInfo"><a href="#module-PInfo" class="anchor"></a><code><span class="keyword">module</span> <a href="PInfo/index.html">PInfo</a> : <a href="../../Git/Pack_info/index.html#module-type-S">Git.Pack_info.S</a> <span class="keyword">with</span> <span class="keyword">module</span> <a href="../../Git/Pack_info/module-type-S/Hash/index.html">Hash</a> := <a href="index.html#module-Hash">Hash</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../../Git/Pack_info/module-type-S/Inflate/index.html">Inflate</a> := <a href="index.html#module-Inflate">Inflate</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../../Git/Pack_info/module-type-S/HDec/index.html">HDec</a> := <a href="index.html#module-HDec">HDec</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../../Git/Pack_info/module-type-S/PDec/index.html">PDec</a> := <a href="index.html#module-PDec">PDec</a></code></div><div class="spec module" id="module-Packed_refs"><a href="#module-Packed_refs" class="anchor"></a><code><span class="keyword">module</span> <a href="Packed_refs/index.html">Packed_refs</a> : <a href="../../Git/Packed_refs/index.html#module-type-S">Git.Packed_refs.S</a> <span class="keyword">with</span> <span class="keyword">module</span> <a href="../../Git/Packed_refs/module-type-S/Hash/index.html">Hash</a> := <a href="index.html#module-Hash">Hash</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../../Git/Packed_refs/module-type-S/FS/index.html">FS</a> := <a href="index.html#module-FS">FS</a></code></div><dl><dt class="spec type" id="type-kind"><a href="#type-kind" class="anchor"></a><code><span class="keyword">type</span> kind</code> = <code>[ </code><table class="variant"><tr id="type-kind.Commit" class="anchored"><td class="def constructor"><a href="#type-kind.Commit" class="anchor"></a><code>| </code><code>`Commit</code></td></tr><tr id="type-kind.Tree" class="anchored"><td class="def constructor"><a href="#type-kind.Tree" class="anchor"></a><code>| </code><code>`Tree</code></td></tr><tr id="type-kind.Tag" class="anchored"><td class="def constructor"><a href="#type-kind.Tag" class="anchor"></a><code>| </code><code>`Tag</code></td></tr><tr id="type-kind.Blob" class="anchored"><td class="def constructor"><a href="#type-kind.Blob" class="anchor"></a><code>| </code><code>`Blob</code></td></tr></table><code> ]</code></dt><dd><p>Kind of the <i>packed</i> Git object.</p></dd></dl><dl><dt class="spec type" id="type-error"><a href="#type-error" class="anchor"></a><code><span class="keyword">type</span> error</code> = <code>[ </code><table class="variant"><tr id="type-error.Delta" class="anchored"><td class="def constructor"><a href="#type-error.Delta" class="anchor"></a><code>| </code><code>`Delta <span class="keyword">of</span> <a href="PEnc/Delta/index.html#type-error">PEnc.Delta.error</a></code></td></tr><tr id="type-error.Pack_decoder" class="anchored"><td class="def constructor"><a href="#type-error.Pack_decoder" class="anchor"></a><code>| </code><code>`Pack_decoder <span class="keyword">of</span> <a href="RPDec/index.html#type-error">RPDec.error</a></code></td></tr><tr id="type-error.Pack_encoder" class="anchored"><td class="def constructor"><a href="#type-error.Pack_encoder" class="anchor"></a><code>| </code><code>`Pack_encoder <span class="keyword">of</span> <a href="PEnc/index.html#type-error">PEnc.error</a></code></td></tr><tr id="type-error.Pack_info" class="anchored"><td class="def constructor"><a href="#type-error.Pack_info" class="anchor"></a><code>| </code><code>`Pack_info <span class="keyword">of</span> <a href="PInfo/index.html#type-error">PInfo.error</a></code></td></tr><tr id="type-error.Idx_decoder" class="anchored"><td class="def constructor"><a href="#type-error.Idx_decoder" class="anchor"></a><code>| </code><code>`Idx_decoder <span class="keyword">of</span> <a href="IDec/index.html#type-error">IDec.error</a></code></td></tr><tr id="type-error.Idx_encoder" class="anchored"><td class="def constructor"><a href="#type-error.Idx_encoder" class="anchor"></a><code>| </code><code>`Idx_encoder <span class="keyword">of</span> <a href="IEnc/index.html#type-error">IEnc.error</a></code></td></tr><tr id="type-error.Invalid_hash" class="anchored"><td class="def constructor"><a href="#type-error.Invalid_hash" class="anchor"></a><code>| </code><code>`Invalid_hash <span class="keyword">of</span> <a href="index.html#module-Hash">Hash</a>.t</code></td></tr><tr id="type-error.Invalid_reference" class="anchored"><td class="def constructor"><a href="#type-error.Invalid_reference" class="anchor"></a><code>| </code><code>`Invalid_reference <span class="keyword">of</span> <a href="Reference/index.html#type-t">Reference.t</a></code></td></tr><tr id="type-error.Git.Error.Decoder.t" class="anchored"><td class="def type"><a href="#type-error.Git.Error.Decoder.t" class="anchor"></a><code>| </code><code><a href="../../Git/Error/Decoder/index.html#type-t">Git.Error.Decoder.t</a></code></td></tr><tr id="type-error.Git.Error.FS.t" class="anchored"><td class="def type"><a href="#type-error.Git.Error.FS.t" class="anchor"></a><code>| </code><code><span><a href="FS/index.html#type-error">FS.error</a> <a href="../../Git/Error/FS/index.html#type-t">Git.Error.FS.t</a></span></code></td></tr><tr id="type-error.Git.Error.Inf.t" class="anchored"><td class="def type"><a href="#type-error.Git.Error.Inf.t" class="anchor"></a><code>| </code><code><span><a href="Inflate/index.html#type-error">Inflate.error</a> <a href="../../Git/Error/Inf/index.html#type-t">Git.Error.Inf.t</a></span></code></td></tr><tr id="type-error.Git.Error.Def.t" class="anchored"><td class="def type"><a href="#type-error.Git.Error.Def.t" class="anchor"></a><code>| </code><code><span><a href="Deflate/index.html#type-error">Deflate.error</a> <a href="../../Git/Error/Def/index.html#type-t">Git.Error.Def.t</a></span></code></td></tr><tr id="type-error.Git.Error.not_found" class="anchored"><td class="def type"><a href="#type-error.Git.Error.not_found" class="anchor"></a><code>| </code><code><a href="../../Git/Error/index.html#type-not_found">Git.Error.not_found</a></code></td></tr></table><code> ]</code></dt><dd><p>The type error.</p></dd></dl><dl><dt class="spec value" id="val-pp_error"><a href="#val-pp_error" class="anchor"></a><code><span class="keyword">val</span> pp_error : <span><a href="index.html#type-error">error</a> Fmt.t</span></code></dt><dd><p>Pretty-printer of <a href="index.html#type-error"><code>error</code></a>.</p></dd></dl><dl><dt class="spec module" id="module-Loose"><a href="#module-Loose" class="anchor"></a><code><span class="keyword">module</span> <a href="Loose/index.html">Loose</a> : <a href="../index.html#module-type-LOOSE">LOOSE</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../module-type-LOOSE/index.html#type-t">t</a> = <a href="Value/index.html#type-t">Value.t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="../module-type-LOOSE/index.html#type-state">state</a> = <a href="index.html#type-t">t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="../module-type-LOOSE/index.html#type-error">error</a> = <a href="index.html#type-error">error</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../module-type-LOOSE/Hash/index.html">Hash</a> := <a href="index.html#module-Hash">Hash</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../module-type-LOOSE/Inflate/index.html">Inflate</a> := <a href="index.html#module-Inflate">Inflate</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../module-type-LOOSE/Deflate/index.html">Deflate</a> := <a href="index.html#module-Deflate">Deflate</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../module-type-LOOSE/FS/index.html">FS</a> := <a href="index.html#module-FS">FS</a></code></dt><dd><p>The <code>Loose</code> module which represents any <i>loose</i> git object available in git repository.</p></dd></dl><dl><dt class="spec module" id="module-Pack"><a href="#module-Pack" class="anchor"></a><code><span class="keyword">module</span> <a href="Pack/index.html">Pack</a> : <a href="../index.html#module-type-PACK">PACK</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../module-type-PACK/index.html#type-t">t</a> = <a href="RPDec/Object/index.html#type-t">RPDec.Object.t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="../module-type-PACK/index.html#type-value">value</a> = <a href="Value/index.html#type-t">Value.t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="../module-type-PACK/index.html#type-state">state</a> = <a href="index.html#type-t">t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="../module-type-PACK/index.html#type-error">error</a> = <a href="index.html#type-error">error</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../module-type-PACK/Hash/index.html">Hash</a> := <a href="index.html#module-Hash">Hash</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../module-type-PACK/FS/index.html">FS</a> := <a href="index.html#module-FS">FS</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../module-type-PACK/Inflate/index.html">Inflate</a> := <a href="index.html#module-Inflate">Inflate</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../module-type-PACK/HDec/index.html">HDec</a> := <a href="index.html#module-HDec">HDec</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../module-type-PACK/PDec/index.html">PDec</a> := <a href="index.html#module-PDec">PDec</a> <span class="keyword">and</span> <span class="keyword">module</span> <a href="../module-type-PACK/RPDec/index.html">RPDec</a> := <a href="index.html#module-RPDec">RPDec</a></code></dt><dd><p>The <code>Pack</code> module which represents any <i>packed</i> git object available in the git repository.</p></dd></dl><dl><dt class="spec type" id="type-buffer"><a href="#type-buffer" class="anchor"></a><code><span class="keyword">type</span> buffer</code></dt><dd><p>The type for buffers.</p></dd></dl><dl><dt class="spec value" id="val-default_buffer"><a href="#val-default_buffer" class="anchor"></a><code><span class="keyword">val</span> default_buffer : unit <span>&#45;&gt;</span> <a href="index.html#type-buffer">buffer</a></code></dt><dt class="spec value" id="val-buffer"><a href="#val-buffer" class="anchor"></a><code><span class="keyword">val</span> buffer : <span>?&#8288;ztmp:Cstruct.t</span> <span>&#45;&gt;</span> <span>?&#8288;etmp:Cstruct.t</span> <span>&#45;&gt;</span> <span>?&#8288;dtmp:Cstruct.t</span> <span>&#45;&gt;</span> <span>?&#8288;raw:Cstruct.t</span> <span>&#45;&gt;</span> <span>?&#8288;window:<a href="Inflate/index.html#type-window">Inflate.window</a></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-buffer">buffer</a></code></dt><dd><p>Build a buffer to read and write a Git object.</p><ul><li><code>window</code> is a buffer used by the <a href="Inflate/index.html"><code>Inflate</code></a> module</li><li><code>ztmp</code> is a buffer used to store the inflated flow</li><li><code>dtmp</code> is a buffer used by the decoder to save the inflated flow (and keep it for an alteration)</li><li><code>raw</code> is a buffer used to store the input flow</li></ul><p>If not specified the cstruct are created with a size of 4 MiB.</p><p>Store functions can be used in a concurrency context only if the specified buffers are not used by another process. The deserialisation functions does not allocate any buffer and uses only the specified buffers to construct the OCaml value.</p></dd></dl><dl><dt class="spec value" id="val-dotgit"><a href="#val-dotgit" class="anchor"></a><code><span class="keyword">val</span> dotgit : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> Fpath.t</code></dt><dd><p><code>dotgit state</code> is the current <code>&quot;.git&quot;</code> path used.</p></dd></dl><dl><dt class="spec value" id="val-root"><a href="#val-root" class="anchor"></a><code><span class="keyword">val</span> root : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> Fpath.t</code></dt><dd><p><code>root state</code> is the current path of the repository.</p></dd></dl><dl><dt class="spec value" id="val-compression"><a href="#val-compression" class="anchor"></a><code><span class="keyword">val</span> compression : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>compression state</code> is the current level of the compression used to write a git object.</p></dd></dl><dl><dt class="spec value" id="val-mem"><a href="#val-mem" class="anchor"></a><code><span class="keyword">val</span> mem : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#module-Hash">Hash</a>.t <span>&#45;&gt;</span> <span>bool Lwt.t</span></code></dt><dd><p><code>mem state hash</code> is true if one object of the current repository <code>state</code> satisfies the predicate <code>digest(object) = hash</code>.</p></dd></dl><dl><dt class="spec value" id="val-list"><a href="#val-list" class="anchor"></a><code><span class="keyword">val</span> list : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><a href="index.html#module-Hash">Hash</a>.t list</span> Lwt.t</span></code></dt><dd><p><code>list state</code> is the list of all git objects available in the current repository <code>state</code>.</p></dd></dl><dl><dt class="spec value" id="val-read"><a href="#val-read" class="anchor"></a><code><span class="keyword">val</span> read : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#module-Hash">Hash</a>.t <span>&#45;&gt;</span> <span><span><span>(<a href="Value/index.html#type-t">Value.t</a>, <a href="index.html#type-error">error</a>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dd><p><code>read state hash</code> is the Git object with hash <code>hash</code> from the current repository <code>state</code>. It de-serializes the git object to an OCaml value. This function needs some buffers, provided <code>t</code>'s buffer function.</p><p>This function follows the same scheme of allocation of <a href="Loose/index.html#val-read"><code>Loose.read</code></a> if the requested git object is a <i>loose</i> git object or <a href="Pack/index.html#val-read"><code>Pack.read</code></a> if the requested git object is a <i>packed</i> git object. Otherwise, return an <a href="index.html#type-error"><code>error</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-read_exn"><a href="#val-read_exn" class="anchor"></a><code><span class="keyword">val</span> read_exn : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#module-Hash">Hash</a>.t <span>&#45;&gt;</span> <span><a href="Value/index.html#type-t">Value.t</a> Lwt.t</span></code></dt><dd><p><code>read_exn state hash</code> is an alias of <a href="index.html#val-read"><code>read</code></a> but raise an exception (instead to return a <code>result</code>) if the git object requested does not exist or if we catch any other errors.</p></dd></dl><dl><dt class="spec value" id="val-write"><a href="#val-write" class="anchor"></a><code><span class="keyword">val</span> write : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="Value/index.html#type-t">Value.t</a> <span>&#45;&gt;</span> <span><span><span>(<a href="index.html#module-Hash">Hash</a>.t * int, <a href="index.html#type-error">error</a>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dd><p><code>write state v</code> writes as a <b>loose</b> git object <code>v</code> in the file-system. It serializes and deflates the value to a new file. which respect the internal structure of a git repository.</p><p>This function does not allocate any buffer and uses only the specified buffers to store the OCaml value to the file-system. Then, the OCaml value will be available by <code>read state digest(v)</code>. Otherwise, return an <a href="index.html#type-error"><code>error</code></a>:</p><ul><li><a href="FS/File/index.html#type-error"><code>FS.File.error</code></a> when we can not create a new file in the file-system.</li><li><a href="Value/E/index.html#type-error"><code>Value.E.error</code></a> when we can not serialize xor deflate the requested git <i>loose</i> object. This kind of error should be never happen.</li></ul></dd></dl><dl><dt class="spec value" id="val-size"><a href="#val-size" class="anchor"></a><code><span class="keyword">val</span> size : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#module-Hash">Hash</a>.t <span>&#45;&gt;</span> <span><span><span>(int64, <a href="index.html#type-error">error</a>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dd><p><code>size state hash</code> is the size of the git object such that <code>digest(object)
      = hash</code>. The size is how many byte(s) are needed to store the serialized (but not inflated) git object in bytes (without the header).</p><p>As <a href="index.html#val-read"><code>read</code></a>, <a href="index.html#val-size"><code>size</code></a> can return an <a href="index.html#type-error"><code>error</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-read_inflated"><a href="#val-read_inflated" class="anchor"></a><code><span class="keyword">val</span> read_inflated : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#module-Hash">Hash</a>.t <span>&#45;&gt;</span> <span><span><span>(<a href="index.html#type-kind">kind</a> * Cstruct.t)</span> option</span> Lwt.t</span></code></dt><dd><p><code>read_inflated state hash</code> is the non-compressed representaton of a Git object in the git repository xs<code>state</code>. However, this function <b>does not</b> de-serialize the git object and returns the kind of the object and the <i>raw-data</i> inflated. Precisely, it decodes only the header.</p><p>This function follows the same scheme of allocation of <a href="Loose/index.html#val-read_inflated"><code>Loose.read_inflated</code></a> if the requested git object is a <i>loose</i> git object or <a href="Pack/index.html#val-read"><code>Pack.read</code></a> if the requested git object is a <i>packed</i> git object. Otherwise, return an <a href="index.html#type-error"><code>error</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-write_inflated"><a href="#val-write_inflated" class="anchor"></a><code><span class="keyword">val</span> write_inflated : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>kind:<a href="index.html#type-kind">kind</a></span> <span>&#45;&gt;</span> Cstruct.t <span>&#45;&gt;</span> <span><a href="index.html#module-Hash">Hash</a>.t Lwt.t</span></code></dt><dd><p><code>write_inflated state kind raw</code> writes the git object in the git repository <code>state</code> and associates the kind to this object. This function does not verify if the raw data is well-defined (and respects the Git format). Then, this function returns the hash produced from the kind and the inflated raw to let the user to retrieve it.</p><p>If we retrieve any error error while the I/O operations, we <b>raise</b> 9by <span class="xref-unresolved" title="unresolved reference to &quot;Lwt.fail&quot;"><code>Lwt</code>.fail</span> a <code>Failure</code> which describe in a <code>string</code> the error encountered.</p></dd></dl><dl><dt class="spec value" id="val-contents"><a href="#val-contents" class="anchor"></a><code><span class="keyword">val</span> contents : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><span>(<span><span>(<a href="index.html#module-Hash">Hash</a>.t * <a href="Value/index.html#type-t">Value.t</a>)</span> list</span>, <a href="index.html#type-error">error</a>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dd><p><code>contents state</code> returns an associated list between the hash and its bind git object. This list contains all git objects available in the current git repository <code>state</code>.</p></dd></dl><dl><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val</span> fold : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span>?&#8288;name:<a href="../../Git/Path/index.html#type-t">Git.Path.t</a></span> <span>&#45;&gt;</span> <span>length:int64</span> <span>&#45;&gt;</span> <a href="index.html#module-Hash">Hash</a>.t <span>&#45;&gt;</span> <a href="Value/index.html#type-t">Value.t</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span>path:<a href="../../Git/Path/index.html#type-t">Git.Path.t</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="index.html#module-Hash">Hash</a>.t <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Lwt.t</span></code></dt><dd><p><code>fold state f ~path acc hash</code> iters on any git objects reachable by the git object <code>hash</code> which located in <code>path</code> (for example, if you iter on a commit, <code>path</code> should be <code>&quot;.&quot;</code> - however, if you iter on a tree, <code>path</code> should be the directory path represented by your tree). For each git objects, we notice the path <code>name</code> (derived from <code>path</code>) if the object is a Blob or a Tree, the <code>length</code> or the git object (see <a href="index.html#val-size"><code>size</code></a>), the <code>hash</code> and the <code>value</code>.</p><p>If the <code>hash</code> points to:</p><ul><li><a href="../../Git/Blob/Make/index.html#type-t"><code>Value.Blob.t</code></a>: <code>f</code> is called only one time with the OCaml value of the <i>blob</i>.</li><li><a href="../../Git/Tree/Make/index.html#type-t"><code>Value.Tree.t</code></a>: <code>f</code> is called firstly with the Ocaml value of the pointed <i>tree</i> by the hash <code>hash</code>. Then, we <i>iter</i> (and call <code>f</code> for each iteration) in the list of entries of the <i>tree</i>. Finally, we retrieve recursively all sub-tree objects and do an ascending walk. <code>f</code> is never called more than one time for each hash.</li><li><a href="../../Git/Commit/Make/index.html#type-t"><code>Value.Commit.t</code></a>: <code>f</code> is called firstly with the OCaml value of the pointed <i>commit</i> by the hash <code>hash</code>. Then, it follozs recursively all parents of the current commit, Finallym it starts a <code>fold</code> inside the pointed root <i>tree</i> git object of each <i>commit</i> previously retrieved. <code>f</code> never called more than one time for each hash.</li><li><a href="../../Git/Tag/Make/index.html#type-t"><code>Value.Tag.t</code></a>: <code>f</code> is called firstly with the OCaml value of the pointed <i>tag</i> by the hash <code>hash</code>. Then, it follows the git object pointed by the <i>tag</i>.</li></ul><p>Any retrieved <a href="index.html#type-error"><code>error</code></a> is skipped.</p></dd></dl><dl><dt class="spec value" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span class="keyword">val</span> iter : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>(<a href="index.html#module-Hash">Hash</a>.t <span>&#45;&gt;</span> <a href="Value/index.html#type-t">Value.t</a> <span>&#45;&gt;</span> <span>unit Lwt.t</span>)</span> <span>&#45;&gt;</span> <a href="index.html#module-Hash">Hash</a>.t <span>&#45;&gt;</span> <span>unit Lwt.t</span></code></dt></dl><div class="spec module" id="module-Ref"><a href="#module-Ref" class="anchor"></a><code><span class="keyword">module</span> <a href="Ref/index.html">Ref</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-clear_caches"><a href="#val-clear_caches" class="anchor"></a><code><span class="keyword">val</span> clear_caches : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>unit Lwt.t</span></code></dt><dd><p><code>clear_caches t</code> drops all values stored in the internal caches binded with the git repository <code>t</code>.</p></dd></dl><dl><dt class="spec value" id="val-reset"><a href="#val-reset" class="anchor"></a><code><span class="keyword">val</span> reset : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><span>(unit, <a href="index.html#type-error">error</a>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dd><p><code>reset t</code> removes all things of the git repository <code>t</code> and ensures it will be empty.</p></dd></dl><dl><dt class="spec value" id="val-has_global_watches"><a href="#val-has_global_watches" class="anchor"></a><code><span class="keyword">val</span> has_global_watches : bool</code></dt><dt class="spec value" id="val-has_global_checkout"><a href="#val-has_global_checkout" class="anchor"></a><code><span class="keyword">val</span> has_global_checkout : bool</code></dt></dl></details></div></div></div><dl><dt class="spec value" id="val-v"><a href="#val-v" class="anchor"></a><code><span class="keyword">val</span> v : <span>?&#8288;dotgit:Fpath.t</span> <span>&#45;&gt;</span> <span>?&#8288;compression:int</span> <span>&#45;&gt;</span> <span>?&#8288;buffer:<span>(<span>(<a href="index.html#type-buffer">buffer</a> <span>&#45;&gt;</span> <span>unit Lwt.t</span>)</span> <span>&#45;&gt;</span> <span>unit Lwt.t</span>)</span></span> <span>&#45;&gt;</span> <a href="argument-2-FS/index.html#type-t">FS.t</a> <span>&#45;&gt;</span> Fpath.t <span>&#45;&gt;</span> <span><span><span>(<a href="index.html#type-t">t</a>, <a href="index.html#type-error">error</a>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dd><p><code>create ?dotgit ?compression ?buffer fs root</code> creates a new store represented by the path <code>root</code> (default is <code>&quot;.&quot;</code>), where the Git objects are located in <code>dotgit</code> (default is <code>root / &quot;.git&quot;</code> and when Git objects are compressed by the <code>level</code> (default is <code>4</code>). If <code>buffer</code> is not set, use a <code>Lwt_pool</code> of <a href="index.html#val-default_buffer"><code>default_buffer</code></a> of size 4. <code>fs</code> is the storage backend state.</p></dd></dl></div></body></html>