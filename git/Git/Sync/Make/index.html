<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Make (git.Git.Sync.Make)</title><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">git</a> &#x00BB; <a href="../../index.html">Git</a> &#x00BB; <a href="../index.html">Sync</a> &#x00BB; Make</nav><header class="odoc-preamble"><h1>Module <code><span>Sync.Make</span></code></h1><p>Creates a lower-level <code>Sync</code> functions <code>fetch</code> and <code>push</code> that are then overridden by backend-specific implementations such as <code>Mem</code> and <code>Git_unix</code></p></header><nav class="odoc-toc"><ul><li><a href="#parameters">Parameters</a></li><li><a href="#signature">Signature</a></li></ul></nav><div class="odoc-content"><h2 id="parameters"><a href="#parameters" class="anchor"></a>Parameters</h2><div class="odoc-spec"><div class="spec parameter anchored" id="argument-1-Digestif"><a href="#argument-1-Digestif" class="anchor"></a><code><span><span class="keyword">module</span> </span><span>Digestif</span><span> : <span class="xref-unresolved">Digestif</span>.S</span></code></div></div><div class="odoc-spec"><div class="spec parameter anchored" id="argument-2-Pack"><a href="#argument-2-Pack" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="argument-2-Pack/index.html">Pack</a></span><span> : <a href="../../../Smart_git/module-type-APPEND/index.html">Smart_git.APPEND</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <span>+'a <a href="../../../Smart_git/module-type-APPEND/index.html#type-fiber">fiber</a></span> = <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span></span></span></code></div></div><div class="odoc-spec"><div class="spec parameter anchored" id="argument-3-Index"><a href="#argument-3-Index" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="argument-3-Index/index.html">Index</a></span><span> : <a href="../../../Smart_git/module-type-APPEND/index.html">Smart_git.APPEND</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <span>+'a <a href="../../../Smart_git/module-type-APPEND/index.html#type-fiber">fiber</a></span> = <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span></span></span></code></div></div><div class="odoc-spec"><div class="spec parameter anchored" id="argument-4-Store"><a href="#argument-4-Store" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="argument-4-Store/index.html">Store</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h2 id="signature"><a href="#signature" class="anchor"></a>Signature</h2><div class="odoc-spec"><div class="spec type anchored" id="type-hash"><a href="#type-hash" class="anchor"></a><code><span><span class="keyword">type</span> hash</span><span> = <span class="xref-unresolved">Digestif</span>.t</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-store"><a href="#type-store" class="anchor"></a><code><span><span class="keyword">type</span> store</span><span> = <a href="argument-4-Store/index.html#type-t">Store.t</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-error"><a href="#type-error" class="anchor"></a><code><span><span class="keyword">type</span> error</span><span> = </span><span>[ </span></code><ol><li id="type-error.Exn" class="def constructor anchored"><a href="#type-error.Exn" class="anchor"></a><code><span>| </span></code><code><span>`Exn <span class="keyword">of</span> exn</span></code></li><li id="type-error.Store" class="def constructor anchored"><a href="#type-error.Store" class="anchor"></a><code><span>| </span></code><code><span>`Store <span class="keyword">of</span> <a href="argument-4-Store/index.html#type-error">Store.error</a></span></code></li><li id="type-error.Mimic.error" class="def type anchored"><a href="#type-error.Mimic.error" class="anchor"></a><code><span>| </span></code><code><span><span class="xref-unresolved">Mimic</span>.error</span></code></li></ol><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_error"><a href="#val-pp_error" class="anchor"></a><code><span><span class="keyword">val</span> pp_error : <span><a href="#type-error">error</a> <span class="xref-unresolved">Fmt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fetch"><a href="#val-fetch" class="anchor"></a><code><span><span class="keyword">val</span> fetch : 
  <span>?push_stdout:<span>(<span>string <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?push_stderr:<span>(<span>string <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?threads:int <span class="arrow">&#45;&gt;</span></span>
  <span>ctx:<span class="xref-unresolved">Mimic</span>.ctx <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../Smart_git/Endpoint/index.html#type-t">Smart_git.Endpoint.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-store">store</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?version:<span>[&gt; `V1 ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?capabilities:<span><a href="../../../Smart/Capability/index.html#type-t">Smart.Capability.t</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?deepen:<span>[ <span>`Depth of int</span> <span><span>| `Timestamp</span> of int64</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>[ `All <span><span>| `Some</span> of <span><span>(<a href="../../Reference/index.html#type-t">Reference.t</a> * <a href="../../Reference/index.html#type-t">Reference.t</a>)</span> list</span></span> <span>| `None</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span>src:<a href="argument-2-Pack/index.html#type-uid">Pack.uid</a> <span class="arrow">&#45;&gt;</span></span>
  <span>dst:<a href="argument-2-Pack/index.html#type-uid">Pack.uid</a> <span class="arrow">&#45;&gt;</span></span>
  <span>idx:<a href="argument-3-Index/index.html#type-uid">Index.uid</a> <span class="arrow">&#45;&gt;</span></span>
  <span>create_idx_stream:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>create_pack_stream:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="argument-2-Pack/index.html#type-t">Pack.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="argument-3-Index/index.html#type-t">Index.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span><span>(<a href="#type-hash">hash</a> * <span><span>(<a href="../../Reference/index.html#type-t">Reference.t</a> * <a href="#type-hash">hash</a>)</span> list</span>)</span> option</span>, <span>[&gt; <a href="#type-error">error</a> ]</span> <span class="keyword">as</span> 'err)</span> <span class="xref-unresolved">Stdlib</span>.result</span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>fetches remote references and saves them. Behavior of fetch when <code>want</code> is <code>`All</code> - fetches all remote references and saves them in store <code>`Some src_dst_pairs</code> - fetch <code>src</code> and save in <code>dst</code> <code>`None</code> - doesn't save anything</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-push"><a href="#val-push" class="anchor"></a><code><span><span class="keyword">val</span> push : 
  <span>ctx:<span class="xref-unresolved">Mimic</span>.ctx <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../Smart_git/Endpoint/index.html#type-t">Smart_git.Endpoint.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-store">store</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?version:<span>[&gt; `V1 ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?capabilities:<span><a href="../../../Smart/Capability/index.html#type-t">Smart.Capability.t</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>[ <span>`Create of <a href="../../Reference/index.html#type-t">Reference.t</a></span>
  <span><span>| `Delete</span> of <a href="../../Reference/index.html#type-t">Reference.t</a></span>
  <span><span>| `Update</span> of <a href="../../Reference/index.html#type-t">Reference.t</a> * <a href="../../Reference/index.html#type-t">Reference.t</a></span> ]</span>
    list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(unit, <span>[&gt; <a href="#type-error">error</a> ]</span> <span class="keyword">as</span> 'err)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div></div></body></html>